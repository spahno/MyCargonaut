(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"3ASF":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{}},FvEo:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var r=n("QIET");class s extends r.a{constructor(){super(...arguments),this.fahrer=[],this.interessenten=[]}getInteressenten(){const e=[];return this.interessenten.forEach(t=>{e.push(JSON.parse(t))}),e}addInteressent(e){return this.interessenten.push(JSON.stringify(e)),this}deleteInteressent(e){return this.interessenten=this.interessenten.filter(t=>JSON.parse(t).userId!==e.userId&&JSON.parse(t).objectId!==e.fahrzeugId),this}isInteressent(e){let t=!1;const n=this.getInteressenten();for(let r=0;r<n.length;r++)if(t=n[r].userId===e,r+1===n.length)return t}getFahrer(){const e=[];return this.fahrer.forEach(t=>{e.push(JSON.parse(t))}),e}addFahrer(e){return this.fahrer.push(JSON.stringify(e)),this}deleteFahrer(e){return this.fahrer=this.fahrer.filter(t=>JSON.parse(t).userId!==e.userId&&JSON.parse(t).objectId!==e.fahrzeugId),this}isFahrer(e){let t=!1;const n=this.getFahrer();for(let r=0;r<n.length;r++)if(t=n[r].userId===e,n[r].userId===e&&r+1===n.length)return t}addLieferobjekt(e){this.lieferobjektId=e}}class i{}},fpJl:function(e,t,n){"use strict";n.d(t,"a",(function(){return B}));var r=n("mrSG"),s=n("FvEo"),i=n("Oj1a"),c=n("Dxl3"),a=n("3ASF"),o=n("euJG"),h=n("fXoL"),u=n("ZETX"),b=n("wHfo"),l=n("88mt"),d=n("vObQ"),f=n("AS9q"),g=n("TEn/"),I=n("ofXK"),m=n("tyNb");function p(e,t){if(1&e&&(h.Nb(0,"ion-item",10),h.Nb(1,"ion-label",3),h.kc(2," Lieferobjekt "),h.Mb(),h.Nb(3,"ion-label"),h.kc(4),h.Mb(),h.Mb()),2&e){const e=h.Xb(2);h.yb(4),h.mc(" ",e.lieferobjekt.name||"Lieferobjekt nicht hinterlegt"," ")}}function k(e,t){if(1&e&&(h.Lb(0),h.Nb(1,"ion-item",10),h.Nb(2,"ion-label",3),h.kc(3," Ersteller: "),h.Mb(),h.Nb(4,"ion-avatar",12),h.Jb(5,"img",13),h.Mb(),h.Nb(6,"ion-label"),h.kc(7),h.Mb(),h.Mb(),h.Nb(8,"ion-item",10),h.Nb(9,"ion-label",3),h.kc(10," Telefon: "),h.Mb(),h.Nb(11,"ion-label"),h.kc(12),h.Mb(),h.Mb(),h.Kb()),2&e){const e=h.Xb(2);h.yb(5),h.bc("src",e.ersteller.profileImage||"https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y",h.gc),h.yb(2),h.nc(" ",e.ersteller.vorname||"Ladefehler"," ",e.ersteller.nachname||"Ladefehler"," "),h.yb(5),h.mc(" ",e.ersteller.telefon||"Ladefehler"," ")}}function y(e,t){1&e&&(h.Nb(0,"ion-item",10),h.Nb(1,"ion-label",3),h.kc(2," Ersteller: "),h.Mb(),h.Nb(3,"ion-label"),h.Nb(4,"em"),h.kc(5,"Fehler bei dem Darstellen des Erstellers!"),h.Mb(),h.Mb(),h.Mb())}function M(e,t){1&e&&(h.Nb(0,"ion-label"),h.Nb(1,"em"),h.kc(2,"Es gibt noch keine Interessenten."),h.Mb(),h.Mb())}function N(e,t){if(1&e){const e=h.Ob();h.Nb(0,"ion-item",15),h.Nb(1,"ion-avatar",3),h.Jb(2,"img",13),h.Mb(),h.Nb(3,"ion-label"),h.kc(4),h.Mb(),h.Nb(5,"ion-icon",16),h.Vb("click",(function(){h.fc(e);const n=t.$implicit;return h.Xb(3).infoPopoverInteressent(n.interessent)})),h.Mb(),h.Nb(6,"ion-icon",17),h.Vb("click",(function(){h.fc(e);const n=t.$implicit;return h.Xb(3).interessentAnnehmen(n.interessent)})),h.Mb(),h.Nb(7,"ion-icon",18),h.Vb("click",(function(){h.fc(e);const n=t.$implicit;return h.Xb(3).interessentEntfernen(n.interessent)})),h.Mb(),h.Mb()}if(2&e){const e=t.$implicit;h.yb(2),h.bc("src",e.user.profileImage||"https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y",h.gc),h.yb(2),h.nc(" ",e.user.vorname," ",e.user.nachname," ")}}function v(e,t){1&e&&(h.Nb(0,"ion-label"),h.Nb(1,"em"),h.kc(2,"Es wurden noch keine Interessenten angenommen."),h.Mb(),h.Mb())}function O(e,t){if(1&e){const e=h.Ob();h.Nb(0,"ion-item",15),h.Nb(1,"ion-avatar",3),h.Jb(2,"img",13),h.Mb(),h.Nb(3,"ion-label"),h.kc(4),h.Mb(),h.Nb(5,"ion-icon",16),h.Vb("click",(function(){h.fc(e);const n=t.$implicit;return h.Xb(3).infoPopoverInteressent(n.fahrer)})),h.Mb(),h.Mb()}if(2&e){const e=t.$implicit;h.yb(2),h.bc("src",e.user.profileImage||"https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y",h.gc),h.yb(2),h.nc(" ",e.user.vorname," ",e.user.nachname," ")}}function F(e,t){if(1&e&&(h.Lb(0),h.Nb(1,"ion-item",2),h.Nb(2,"ion-label",3),h.kc(3,"Interessenten:"),h.Mb(),h.ic(4,M,3,0,"ion-label",0),h.Mb(),h.ic(5,N,8,3,"ion-item",14),h.Nb(6,"ion-item",2),h.Nb(7,"ion-label",3),h.kc(8,"Fahrer:"),h.Mb(),h.ic(9,v,3,0,"ion-label",0),h.Mb(),h.ic(10,O,6,3,"ion-item",14),h.Kb()),2&e){const e=h.Xb(2);h.yb(4),h.ac("ngIf",0===e.interessenten.length),h.yb(1),h.ac("ngForOf",e.interessenten),h.yb(4),h.ac("ngIf",0===e.fahrer.length),h.yb(1),h.ac("ngForOf",e.fahrer)}}function w(e,t){1&e&&(h.Nb(0,"ion-note"),h.Nb(1,"em"),h.kc(2,"Es wurden noch keine Interessenten angenommen."),h.Mb(),h.Mb())}function S(e,t){if(1&e){const e=h.Ob();h.Nb(0,"ion-button",23),h.Vb("click",(function(){return h.fc(e),h.Xb(3).starteFahrt()})),h.kc(1,"Fahrt starten"),h.Mb()}if(2&e){const e=h.Xb(3);h.ac("disabled",e.gesuch.fahrer.length<1)}}function A(e,t){if(1&e){const e=h.Ob();h.Nb(0,"ion-button",24),h.Vb("click",(function(){return h.fc(e),h.Xb(3).fahrtBeenden()})),h.kc(1,"Fahrt beenden"),h.Mb()}}function C(e,t){1&e&&(h.Nb(0,"ion-button",25),h.Nb(1,"em"),h.kc(2,"Fahrt wurde beendet"),h.Mb(),h.Mb())}function j(e,t){if(1&e&&(h.Nb(0,"div",19),h.ic(1,w,3,0,"ion-note",0),h.Jb(2,"br"),h.ic(3,S,2,1,"ion-button",20),h.ic(4,A,2,0,"ion-button",21),h.ic(5,C,3,0,"ion-button",22),h.Mb()),2&e){const e=h.Xb(2);h.yb(1),h.ac("ngIf",e.gesuch.fahrer.length<1),h.yb(2),h.ac("ngIf",!e.gesuch.fahrtId),h.yb(1),h.ac("ngIf",e.gesuch.fahrtId&&!e.fahrt.beendet),h.yb(1),h.ac("ngIf",e.gesuch.fahrtId&&e.fahrt.beendet)}}function z(e,t){1&e&&(h.Nb(0,"ion-button",25),h.Nb(1,"em"),h.kc(2,"Anfrage ausstehend"),h.Mb(),h.Mb())}function D(e,t){1&e&&(h.Nb(0,"ion-button",25),h.Nb(1,"em"),h.kc(2,"Anfrage abgelehnt"),h.Mb(),h.Mb())}function E(e,t){1&e&&(h.Nb(0,"ion-button",25),h.Nb(1,"em"),h.kc(2,"Tracking gesendet"),h.Mb(),h.Mb())}function P(e,t){1&e&&(h.Nb(0,"ion-button",27),h.Nb(1,"em"),h.kc(2,"Fahrt tracken"),h.Mb(),h.Mb()),2&e&&h.ac("routerLink","/tracking")}function _(e,t){if(1&e){const e=h.Ob();h.Nb(0,"ion-button",24),h.Vb("click",(function(){return h.fc(e),h.Xb(3).gesuchAnfragen()})),h.kc(1,"Anfragen"),h.Mb()}}function x(e,t){if(1&e&&(h.Nb(0,"div",19),h.ic(1,z,3,0,"ion-button",22),h.ic(2,D,3,0,"ion-button",22),h.ic(3,E,3,0,"ion-button",22),h.ic(4,P,3,1,"ion-button",26),h.ic(5,_,2,0,"ion-button",21),h.Mb()),2&e){const e=h.Xb(2);h.yb(1),h.ac("ngIf",!e.gesuch.fahrtId&&e.gesuch.isInteressent(e.user.id)),h.yb(1),h.ac("ngIf",e.gesuch.fahrtId&&e.gesuch.isInteressent(e.user.id)),h.yb(1),h.ac("ngIf",!e.gesuch.fahrtId&&e.gesuch.isFahrer(e.user.id)),h.yb(1),h.ac("ngIf",e.gesuch.fahrtId&&e.gesuch.isFahrer(e.user.id)),h.yb(1),h.ac("ngIf",!e.gesuch.isInteressent(e.user.id)&&!e.gesuch.isFahrer(e.user.id))}}function J(e,t){if(1&e){const e=h.Ob();h.Nb(0,"div"),h.Nb(1,"ion-card",1),h.Nb(2,"ion-item",2),h.Nb(3,"h3",3),h.kc(4),h.Mb(),h.Nb(5,"ion-badge",4),h.kc(6),h.Mb(),h.Mb(),h.Nb(7,"ion-item",2),h.Nb(8,"h4",3),h.kc(9),h.Mb(),h.Jb(10,"ion-icon",5),h.Nb(11,"h4",6),h.kc(12),h.Mb(),h.Mb(),h.Nb(13,"ion-item",2),h.Nb(14,"p",3),h.kc(15,"Ankunft:"),h.Mb(),h.Nb(16,"p",6),h.kc(17),h.Mb(),h.Mb(),h.Nb(18,"ion-icon",7),h.Vb("click",(function(){h.fc(e);const t=h.Xb();return t.dropdown=!t.dropdown})),h.Mb(),h.Mb(),h.Nb(19,"ion-card",8),h.ic(20,p,5,1,"ion-item",9),h.Nb(21,"ion-item",10),h.Nb(22,"ion-label",3),h.kc(23," Start Adresse: "),h.Mb(),h.Nb(24,"ion-label"),h.kc(25),h.Jb(26,"br"),h.kc(27),h.Mb(),h.Mb(),h.Nb(28,"ion-item",10),h.Nb(29,"ion-label",3),h.kc(30," Ziel Adresse: "),h.Mb(),h.Nb(31,"ion-label"),h.kc(32),h.Jb(33,"br"),h.kc(34),h.Mb(),h.Mb(),h.ic(35,k,13,4,"ng-container",0),h.ic(36,y,6,0,"ion-item",9),h.Nb(37,"ion-item",10),h.Nb(38,"ion-label",3),h.kc(39," Bezahlung: "),h.Mb(),h.Nb(40,"ion-label"),h.kc(41),h.Mb(),h.Mb(),h.ic(42,F,11,4,"ng-container",0),h.ic(43,j,6,4,"div",11),h.ic(44,x,6,5,"div",11),h.Mb(),h.Mb()}if(2&e){const e=h.Xb();h.yb(4),h.lc(e.lieferobjekt.name||"Lieferobjekt nicht hinterlegt"),h.yb(2),h.lc(e.interessentenText),h.yb(3),h.lc(e.gesuch.abfahrtOrt),h.yb(3),h.lc(e.gesuch.ankunftOrt),h.yb(5),h.nc("",e.gesuch.ankunftDatum,", ",e.gesuch.ankunftZeit,""),h.yb(1),h.Ab("spin",e.dropdown),h.yb(1),h.Ab("card-dropdown-disabled",!e.dropdown),h.yb(1),h.ac("ngIf",e.gesuch),h.yb(5),h.mc(" ",e.gesuch.abfahrtStrasse,","),h.yb(2),h.nc(" ",e.gesuch.abfahrtPlz," ",e.gesuch.abfahrtOrt," "),h.yb(5),h.mc(" ",e.gesuch.ankunftStrasse,","),h.yb(2),h.nc(" ",e.gesuch.ankunftPlz," ",e.gesuch.ankunftOrt," "),h.yb(1),h.ac("ngIf",e.gesuch.erstellerId),h.yb(1),h.ac("ngIf",!e.gesuch.erstellerId),h.yb(5),h.mc(" ",e.gesuch.bezahlung," "),h.yb(1),h.ac("ngIf",e.user.id&&e.user.id===e.gesuch.erstellerId&&e.gesuch._ID),h.yb(1),h.ac("ngIf",e.user.id&&e.user.id===e.gesuch.erstellerId&&e.gesuch._ID),h.yb(1),h.ac("ngIf",e.user.id&&e.user.id!==e.gesuch.erstellerId&&e.gesuch._ID)}}function G(e,t){1&e&&(h.Nb(0,"div"),h.Nb(1,"ion-card",28),h.Nb(2,"ion-item",2),h.Jb(3,"ion-skeleton-text",29),h.Jb(4,"ion-skeleton-text",30),h.Mb(),h.Nb(5,"ion-item",2),h.Jb(6,"ion-skeleton-text",31),h.Jb(7,"ion-icon",5),h.Jb(8,"ion-skeleton-text",31),h.Mb(),h.Nb(9,"ion-item",10),h.Jb(10,"ion-skeleton-text",29),h.Jb(11,"ion-skeleton-text",30),h.Jb(12,"ion-skeleton-text",32),h.Mb(),h.Jb(13,"ion-icon",33),h.Mb(),h.Mb())}let B=(()=>{class e{constructor(e,t,n,r,o,h,u){this.authService=e,this.gesuchService=t,this.fahrtService=n,this.lieferobjektService=r,this.fahrzeugService=o,this.alertController=h,this.modalController=u,this.inputGesuch=new s.a,this.gesuch=new s.a,this.inputUser=new i.a("","","",""),this.user=new i.a("","","",""),this.lieferobjekt=new a.a,this.interessenten=[],this.fahrer=[],this.fahrt=new c.a,this.ersteller=new i.a("","","",""),this.dropdown=!1}ngOnInit(){Object.assign(this.user,this.inputUser),Object.assign(this.gesuch,this.inputGesuch),console.log("Card:"+this.user.id),console.log("Card:"+this.gesuch._ID);const e=this.gesuch.getInteressenten();this.setInteressenten(e),this.setInteressentenText(e.length),this.setFahrer(this.gesuch.getFahrer()),this.gesuch.erstellerId&&this.authService.findUserById(this.gesuch.erstellerId).then(e=>{Object.assign(this.ersteller,e)}),this.gesuch.lieferobjektId&&this.lieferobjektService.findLieferobjektById(this.gesuch.lieferobjektId).subscribe(e=>{Object.assign(this.lieferobjekt,e)})}setInteressenten(e){this.interessenten=[],e.forEach(e=>{this.authService.findUserById(e.userId).then(t=>{this.interessenten.push({user:t,interessent:e})})})}setFahrer(e){this.interessenten=[],e.forEach(e=>{this.authService.findUserById(e.userId).then(t=>{this.fahrer.push({user:t,fahrer:e})})})}setInteressentenText(e){this.interessentenText=0===e?"Keine Interessenten":1===e?"1 Interessent":e+" Interessenten"}interessentAnnehmen(e){this.gesuch.isFahrer(e.userId)?alert("Der Interessent wurde schon angenommen."):(this.gesuch.addFahrer(e),this.gesuch.deleteInteressent(e),this.gesuchService.updateGesuch(this.gesuch).then(e=>{Object.assign(this.gesuch,e.gesuch)}).catch(e=>this.presentAlert("Fehler","Fehler beim Update des Gesuchs. Error: "+e,"Ok")))}interessentEntfernen(e){this.authService.findUserById(e.userId).then(t=>{const n=t;n.id=e.userId;const r=n.interessierteGesuche.indexOf(this.gesuch._ID);n.interessierteGesuche.splice(r,1),this.authService.updateUser(n)}),this.gesuch.deleteInteressent(e),this.gesuchService.updateGesuch(this.gesuch).then(e=>{Object.assign(this.gesuch,e.gesuch)}).catch(e=>this.presentAlert("Fehler","Fehler beim Update des Gesuchs. Error: "+e,"Ok"))}infoPopoverInteressent(e){return Object(r.a)(this,void 0,void 0,(function*(){const t=yield this.authService.findUserById(e.userId),n=yield this.fahrzeugService.findFahrzeugById(e.fahrzeugId).subscribe(e=>Object(r.a)(this,void 0,void 0,(function*(){n.unsubscribe();const r=yield this.modalController.create({component:o.a,cssClass:"my-custom-class",componentProps:{interessent:t,fahrzeug:e}});return yield r.present()})))}))}starteFahrt(){this.authService.getUser()&&this.authService.getUser().id===this.gesuch.erstellerId?this.gesuch?this.gesuch.fahrtId?this.presentAlert("Fehler","Fahrt starten fehlgeschlagen. Die fahrt wurde bereits gestartet.","Ok"):this.fahrtService.startFahrt().then(e=>{this.fahrt=e.fahrt,this.gesuch.fahrtId=e.fahrt._ID,this.gesuchService.updateGesuch(this.gesuch).then(e=>{this.presentAlert("Fahrt gestartet","Die fahrt von "+e.gesuch.abfahrtOrt+" nach "+e.gesuch.ankunftOrt+" wurde gestartet.<br>Ihre angegebene Ankunftszeit ist: "+e.gesuch.ankunftZeit+".","Los gehts!")}).catch(e=>{this.presentAlert("Fehler","Fahrt starten fehlgeschlagen. Error: "+e,"Ok")})}):this.presentAlert("Fehler","Fahrt starten fehlgeschlagen. Error: angebot: undefined","Ok"):this.presentAlert("Fehler","Fahrt starten fehlgeschlagen. Error: Nicht Authorisiert","Ok")}fahrtBeenden(){this.authService.getUser()&&this.authService.getUser().id===this.gesuch.erstellerId?this.gesuch?this.gesuch.fahrtId?this.fahrtService.endFahrt(this.gesuch.fahrtId).then(e=>Object(r.a)(this,void 0,void 0,(function*(){this.fahrt=e,this.fahrtBewerten(e._ID)}))):this.presentAlert("Fehler","Fahrt beenden fehlgeschlagen. Die fahrt wurde noch nicht gestartet.","Ok"):this.presentAlert("Fehler","Fahrt beenden fehlgeschlagen. Error: angebot: undefined","Ok"):this.presentAlert("Fehler","Fahrt beenden fehlgeschlagen. Error: Nicht Authorisiert","Ok")}fahrtBewerten(e){return Object(r.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",header:"Fahrt bewerten!",subHeader:"Bewerte die Fahrt",message:'<ion-col>                <ion-icon name="star"></ion-icon>                <ion-icon name="star"></ion-icon>                <ion-icon name="star"></ion-icon>                <ion-icon name="star"></ion-icon>                <ion-icon name="star"></ion-icon>            </ion-col>',buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Okay",handler:()=>{this.fahrtService.fahrtBewerten(e,5).then(e=>{this.fahrt=e}).catch(e=>{this.presentAlert("Bewertung fehlgeschlagen!","Beim speichern der Bewertung ist etwas schiefgelaufen. Error: <br>"+e,"Ok")})}}]});yield t.present()}))}getFahrzeuge(){return new Promise((e,t)=>{if(this.user.fahrzeuge&&0===this.user.fahrzeuge.length)t("Keine Fahrzeuge gespeichert");else{const t=[];let n=!0;this.user.fahrzeuge.forEach(r=>{const s=this.fahrzeugService.findFahrzeugById(r).subscribe(i=>{s.unsubscribe(),t.push({name:r,type:"radio",label:i.marke+" "+i.modell,value:r,checked:n}),n=!1,t.length===this.user.fahrzeuge.length&&e(t)})})}})}gesuchAnfragen(){return Object(r.a)(this,void 0,void 0,(function*(){this.gesuch&&(yield this.getFahrzeuge().then(e=>Object(r.a)(this,void 0,void 0,(function*(){if(e){const t=yield this.alertController.create({cssClass:"my-custom-class",header:"Fahrt anbieten",message:"W\xe4hle dein Fahrzeug mit dem du die Fahrt anbieten m\xf6chtest:",inputs:e,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Anfrage senden",handler:e=>{const t=new s.b,n=this.authService.getUser();n.interessierteGesuche.push(this.gesuch._ID),t.userId=n.id,t.fahrzeugId=e,this.gesuch.addInteressent(t),this.authService.updateUser(n).catch(e=>{this.presentAlert("Fehler!","Fehler beim update des Users der sich interessiert. Error: "+e,"Ok")}),this.gesuchService.updateGesuch(this.gesuch).catch(e=>{this.presentAlert("Fehler!","Fehler beim speichern des Angebots entstanden. Error: "+e,"Ok")})}}]});yield t.present()}}))).catch(e=>{this.presentAlert("Fehler!","Fehler laden der Fahrzeuge. Error: "+e,"Ok")}))}))}presentAlert(e,t,n){return Object(r.a)(this,void 0,void 0,(function*(){const r=yield this.alertController.create({cssClass:"my-custom-class",header:e,message:t,buttons:[n]});yield r.present()}))}}return e.\u0275fac=function(t){return new(t||e)(h.Ib(u.a),h.Ib(b.a),h.Ib(l.a),h.Ib(d.a),h.Ib(f.a),h.Ib(g.a),h.Ib(g.M))},e.\u0275cmp=h.Cb({type:e,selectors:[["app-gesuch-card"]],inputs:{inputGesuch:"inputGesuch",inputUser:"inputUser"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"border-card-green"],["lines","none"],["slot","start"],["color","primary","slot","end"],["name","arrow-forward",1,"center"],["slot","end"],["size","large","name","chevron-down-outline",1,"center","transition","pointer",3,"click"],[1,"card-dropdown"],["lines","full",4,"ngIf"],["lines","full"],["class","ion-text-center ion-margin",4,"ngIf"],[1,"ion-margin"],[3,"src"],["lines","inset",4,"ngFor","ngForOf"],["lines","inset"],["slot","end","name","information-circle-outline",3,"click"],["slot","end","color","primary","name","checkmark-circle-outline",3,"click"],["slot","end","color","secondary","name","close-circle-outline",3,"click"],[1,"ion-text-center","ion-margin"],[3,"disabled","click",4,"ngIf"],[3,"click",4,"ngIf"],["disabled","true",4,"ngIf"],[3,"disabled","click"],[3,"click"],["disabled","true"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],[1,"ion-padding","custom-skeleton","border-card-green"],["slot","start","animated","",2,"width","30%"],["slot","end","animated","",2,"width","10%"],["slot","","animated","",2,"width","25%"],["slot","end","animated","",2,"width","20%"],["size","large","name","chevron-down-outline",1,"center"]],template:function(e,t){1&e&&(h.ic(0,J,45,23,"div",0),h.ic(1,G,14,0,"div",0)),2&e&&(h.ac("ngIf",t.user.id&&t.gesuch._ID),h.yb(1),h.ac("ngIf",!(t.user.id&&t.gesuch._ID)))},directives:[I.i,g.i,g.v,g.f,g.s,g.w,g.c,I.h,g.z,g.g,g.P,m.h,g.E],styles:[".border-card-green[_ngcontent-%COMP%]{border:2px solid green}.border-card-orange[_ngcontent-%COMP%]{border:2px solid orange}.border-card-green[_ngcontent-%COMP%], .border-card-orange[_ngcontent-%COMP%]{z-index:1}.center[_ngcontent-%COMP%]{width:100%;text-align:center}.card-dropdown[_ngcontent-%COMP%]{opacity:1;display:block;overflow:scroll;position:relative;top:0;max-height:500px}.card-dropdown[_ngcontent-%COMP%], .card-dropdown-disabled[_ngcontent-%COMP%]{transition:opacity 1s ease-out,max-height 1s,top 1s}.card-dropdown-disabled[_ngcontent-%COMP%]{top:-200px;opacity:0;max-height:0}.spin[_ngcontent-%COMP%]{transform:rotate(180deg)}.spin[_ngcontent-%COMP%], .transition[_ngcontent-%COMP%]{transition:1s}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),e})()},wHfo:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("mrSG"),s=n("lJxs"),i=n("fXoL"),c=n("I/3d"),a=n("tyNb");let o=(()=>{class e{constructor(e,t){this.afs=e,this.router=t,this.startort="",this.zielort="",this.endDate="",this.gesuchCollection=e.collection("gesuche")}static copyAndPrepare(e){const t=Object.assign({},e);return delete t._ID,t.erstellerId=t.erstellerId||null,t.ankunftDatum=t.ankunftDatum||null,t.ankunftZeit=t.ankunftZeit||null,t.abfahrtStrasse=t.abfahrtStrasse||null,t.abfahrtOrt=t.abfahrtOrt||null,t.abfahrtPlz=t.abfahrtPlz||null,t.ankunftStrasse=t.ankunftStrasse||null,t.ankunftOrt=t.ankunftOrt||null,t.ankunftPlz=t.ankunftPlz||null,t.bezahlung=t.bezahlung||null,t.fahrtId=t.fahrtId||null,t.fahrer=t.fahrer||[],t.interessenten=t.interessenten||[],t.lieferobjektId=t.lieferobjektId||null,t}observableGesuch(){return this.gesuchCollection.snapshotChanges().pipe(Object(s.a)(e=>e.map(e=>{const t=e.payload.doc.data();return t._ID=e.payload.doc.id,t})))}findGesuchById(e){return new Promise((t,n)=>{this.gesuchCollection.doc(e).get().toPromise().then(n=>{const r=n.data();r._ID=e,t(r)}).catch(e=>n(e))})}addGesuch(t){return new Promise((n,r)=>{this.gesuchCollection.add(e.copyAndPrepare(t)).then(e=>{const r=t;r._ID=e.id,n({gesuch:r,message:"Document written with ID: "+e.id})}).catch(e=>{r("Error adding document: "+e)})})}deleteGesuch(e){return new Promise((t,n)=>{this.gesuchCollection.doc(e).delete().then(()=>Object(r.a)(this,void 0,void 0,(function*(){t("Successfully deleted Document with ID: "+e)}))).catch(e=>{n("Error deleting document: "+e)})})}updateGesuch(t){return new Promise((n,s)=>{const i=t._ID;this.gesuchCollection.doc(t._ID).update(e.copyAndPrepare(t)).then(()=>Object(r.a)(this,void 0,void 0,(function*(){t._ID=i,n({gesuch:t,message:"Successfully edited Document with ID: "+t._ID})}))).catch(e=>{s("Error editing document: "+e)})})}startSearch(e,t,n){this.startort=e,this.zielort=t,this.endDate=n,this.router.navigate(["/gesuch"])}}return e.\u0275fac=function(t){return new(t||e)(i.Rb(c.a),i.Rb(a.g))},e.\u0275prov=i.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);