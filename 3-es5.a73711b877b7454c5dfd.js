!function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var c=s(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return i(this,n)}}function i(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"3ASF":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function e(){c(this,e)}},FvEo:function(e,i,s){"use strict";s.d(i,"a",(function(){return a})),s.d(i,"b",(function(){return o}));var a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(s,e);var i=r(s);function s(){var e;return c(this,s),(e=i.apply(this,arguments)).fahrer=[],e.interessenten=[],e}return t(s,[{key:"getInteressenten",value:function(){var e=[];return this.interessenten.forEach((function(t){e.push(JSON.parse(t))})),e}},{key:"addInteressent",value:function(e){return this.interessenten.push(JSON.stringify(e)),this}},{key:"deleteInteressent",value:function(e){return this.interessenten=this.interessenten.filter((function(t){return JSON.parse(t).userId!==e.userId&&JSON.parse(t).objectId!==e.fahrzeugId})),this}},{key:"isInteressent",value:function(e){for(var t=!1,n=this.getInteressenten(),r=0;r<n.length;r++)if(t=n[r].userId===e,r+1===n.length)return t}},{key:"getFahrer",value:function(){var e=[];return this.fahrer.forEach((function(t){e.push(JSON.parse(t))})),e}},{key:"addFahrer",value:function(e){return this.fahrer.push(JSON.stringify(e)),this}},{key:"deleteFahrer",value:function(e){return this.fahrer=this.fahrer.filter((function(t){return JSON.parse(t).userId!==e.userId&&JSON.parse(t).objectId!==e.fahrzeugId})),this}},{key:"isFahrer",value:function(e){for(var t=!1,n=this.getFahrer(),r=0;r<n.length;r++)if(t=n[r].userId===e,n[r].userId===e&&r+1===n.length)return t}},{key:"addLieferobjekt",value:function(e){this.lieferobjektId=e}}]),s}(s("QIET").a),o=function e(){c(this,e)}},fpJl:function(e,n,r){"use strict";r.d(n,"a",(function(){return U}));var i=r("mrSG"),s=r("FvEo"),a=r("Oj1a"),o=r("Dxl3"),u=r("3ASF"),h=r("euJG"),f=r("fXoL"),l=r("ZETX"),b=r("wHfo"),d=r("88mt"),g=r("vObQ"),p=r("AS9q"),v=r("TEn/"),m=r("ofXK"),k=r("tyNb");function I(e,t){if(1&e&&(f.Nb(0,"ion-item",10),f.Nb(1,"ion-label",3),f.kc(2," Lieferobjekt "),f.Mb(),f.Nb(3,"ion-label"),f.kc(4),f.Mb(),f.Mb()),2&e){var n=f.Xb(2);f.yb(4),f.mc(" ",n.lieferobjekt.name||"Lieferobjekt nicht hinterlegt"," ")}}function y(e,t){if(1&e&&(f.Lb(0),f.Nb(1,"ion-item",10),f.Nb(2,"ion-label",3),f.kc(3," Ersteller: "),f.Mb(),f.Nb(4,"ion-avatar",12),f.Jb(5,"img",13),f.Mb(),f.Nb(6,"ion-label"),f.kc(7),f.Mb(),f.Mb(),f.Nb(8,"ion-item",10),f.Nb(9,"ion-label",3),f.kc(10," Telefon: "),f.Mb(),f.Nb(11,"ion-label"),f.kc(12),f.Mb(),f.Mb(),f.Kb()),2&e){var n=f.Xb(2);f.yb(5),f.bc("src",n.ersteller.profileImage||"https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y",f.gc),f.yb(2),f.nc(" ",n.ersteller.vorname||"Ladefehler"," ",n.ersteller.nachname||"Ladefehler"," "),f.yb(5),f.mc(" ",n.ersteller.telefon||"Ladefehler"," ")}}function w(e,t){1&e&&(f.Nb(0,"ion-item",10),f.Nb(1,"ion-label",3),f.kc(2," Ersteller: "),f.Mb(),f.Nb(3,"ion-label"),f.Nb(4,"em"),f.kc(5,"Fehler bei dem Darstellen des Erstellers!"),f.Mb(),f.Mb(),f.Mb())}function M(e,t){1&e&&(f.Nb(0,"ion-label"),f.Nb(1,"em"),f.kc(2,"Es gibt noch keine Interessenten."),f.Mb(),f.Mb())}function N(e,t){if(1&e){var n=f.Ob();f.Nb(0,"ion-item",15),f.Nb(1,"ion-avatar",3),f.Jb(2,"img",13),f.Mb(),f.Nb(3,"ion-label"),f.kc(4),f.Mb(),f.Nb(5,"ion-icon",16),f.Vb("click",(function(){f.fc(n);var e=t.$implicit;return f.Xb(3).infoPopoverInteressent(e.interessent)})),f.Mb(),f.Nb(6,"ion-icon",17),f.Vb("click",(function(){f.fc(n);var e=t.$implicit;return f.Xb(3).interessentAnnehmen(e.interessent)})),f.Mb(),f.Nb(7,"ion-icon",18),f.Vb("click",(function(){f.fc(n);var e=t.$implicit;return f.Xb(3).interessentEntfernen(e.interessent)})),f.Mb(),f.Mb()}if(2&e){var r=t.$implicit;f.yb(2),f.bc("src",r.user.profileImage||"https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y",f.gc),f.yb(2),f.nc(" ",r.user.vorname," ",r.user.nachname," ")}}function O(e,t){1&e&&(f.Nb(0,"ion-label"),f.Nb(1,"em"),f.kc(2,"Es wurden noch keine Interessenten angenommen."),f.Mb(),f.Mb())}function F(e,t){if(1&e){var n=f.Ob();f.Nb(0,"ion-item",15),f.Nb(1,"ion-avatar",3),f.Jb(2,"img",13),f.Mb(),f.Nb(3,"ion-label"),f.kc(4),f.Mb(),f.Nb(5,"ion-icon",16),f.Vb("click",(function(){f.fc(n);var e=t.$implicit;return f.Xb(3).infoPopoverInteressent(e.fahrer)})),f.Mb(),f.Mb()}if(2&e){var r=t.$implicit;f.yb(2),f.bc("src",r.user.profileImage||"https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y",f.gc),f.yb(2),f.nc(" ",r.user.vorname," ",r.user.nachname," ")}}function x(e,t){if(1&e&&(f.Lb(0),f.Nb(1,"ion-item",2),f.Nb(2,"ion-label",3),f.kc(3,"Interessenten:"),f.Mb(),f.ic(4,M,3,0,"ion-label",0),f.Mb(),f.ic(5,N,8,3,"ion-item",14),f.Nb(6,"ion-item",2),f.Nb(7,"ion-label",3),f.kc(8,"Fahrer:"),f.Mb(),f.ic(9,O,3,0,"ion-label",0),f.Mb(),f.ic(10,F,6,3,"ion-item",14),f.Kb()),2&e){var n=f.Xb(2);f.yb(4),f.ac("ngIf",0===n.interessenten.length),f.yb(1),f.ac("ngForOf",n.interessenten),f.yb(4),f.ac("ngIf",0===n.fahrer.length),f.yb(1),f.ac("ngForOf",n.fahrer)}}function S(e,t){1&e&&(f.Nb(0,"ion-note"),f.Nb(1,"em"),f.kc(2,"Es wurden noch keine Interessenten angenommen."),f.Mb(),f.Mb())}function j(e,t){if(1&e){var n=f.Ob();f.Nb(0,"ion-button",23),f.Vb("click",(function(){return f.fc(n),f.Xb(3).starteFahrt()})),f.kc(1,"Fahrt starten"),f.Mb()}if(2&e){var r=f.Xb(3);f.ac("disabled",r.gesuch.fahrer.length<1)}}function P(e,t){if(1&e){var n=f.Ob();f.Nb(0,"ion-button",24),f.Vb("click",(function(){return f.fc(n),f.Xb(3).fahrtBeenden()})),f.kc(1,"Fahrt beenden"),f.Mb()}}function _(e,t){1&e&&(f.Nb(0,"ion-button",25),f.Nb(1,"em"),f.kc(2,"Fahrt wurde beendet"),f.Mb(),f.Mb())}function A(e,t){if(1&e&&(f.Nb(0,"div",19),f.ic(1,S,3,0,"ion-note",0),f.Jb(2,"br"),f.ic(3,j,2,1,"ion-button",20),f.ic(4,P,2,0,"ion-button",21),f.ic(5,_,3,0,"ion-button",22),f.Mb()),2&e){var n=f.Xb(2);f.yb(1),f.ac("ngIf",n.gesuch.fahrer.length<1),f.yb(2),f.ac("ngIf",!n.gesuch.fahrtId),f.yb(1),f.ac("ngIf",n.gesuch.fahrtId&&!n.fahrt.beendet),f.yb(1),f.ac("ngIf",n.gesuch.fahrtId&&n.fahrt.beendet)}}function C(e,t){1&e&&(f.Nb(0,"ion-button",25),f.Nb(1,"em"),f.kc(2,"Anfrage ausstehend"),f.Mb(),f.Mb())}function D(e,t){1&e&&(f.Nb(0,"ion-button",25),f.Nb(1,"em"),f.kc(2,"Anfrage abgelehnt"),f.Mb(),f.Mb())}function E(e,t){1&e&&(f.Nb(0,"ion-button",25),f.Nb(1,"em"),f.kc(2,"Tracking gesendet"),f.Mb(),f.Mb())}function z(e,t){1&e&&(f.Nb(0,"ion-button",27),f.Nb(1,"em"),f.kc(2,"Fahrt tracken"),f.Mb(),f.Mb()),2&e&&f.ac("routerLink","/tracking")}function J(e,t){if(1&e){var n=f.Ob();f.Nb(0,"ion-button",24),f.Vb("click",(function(){return f.fc(n),f.Xb(3).gesuchAnfragen()})),f.kc(1,"Anfragen"),f.Mb()}}function R(e,t){if(1&e&&(f.Nb(0,"div",19),f.ic(1,C,3,0,"ion-button",22),f.ic(2,D,3,0,"ion-button",22),f.ic(3,E,3,0,"ion-button",22),f.ic(4,z,3,1,"ion-button",26),f.ic(5,J,2,0,"ion-button",21),f.Mb()),2&e){var n=f.Xb(2);f.yb(1),f.ac("ngIf",!n.gesuch.fahrtId&&n.gesuch.isInteressent(n.user.id)),f.yb(1),f.ac("ngIf",n.gesuch.fahrtId&&n.gesuch.isInteressent(n.user.id)),f.yb(1),f.ac("ngIf",!n.gesuch.fahrtId&&n.gesuch.isFahrer(n.user.id)),f.yb(1),f.ac("ngIf",n.gesuch.fahrtId&&n.gesuch.isFahrer(n.user.id)),f.yb(1),f.ac("ngIf",!n.gesuch.isInteressent(n.user.id)&&!n.gesuch.isFahrer(n.user.id))}}function G(e,t){if(1&e){var n=f.Ob();f.Nb(0,"div"),f.Nb(1,"ion-card",1),f.Nb(2,"ion-item",2),f.Nb(3,"h3",3),f.kc(4),f.Mb(),f.Nb(5,"ion-badge",4),f.kc(6),f.Mb(),f.Mb(),f.Nb(7,"ion-item",2),f.Nb(8,"h4",3),f.kc(9),f.Mb(),f.Jb(10,"ion-icon",5),f.Nb(11,"h4",6),f.kc(12),f.Mb(),f.Mb(),f.Nb(13,"ion-item",2),f.Nb(14,"p",3),f.kc(15,"Ankunft:"),f.Mb(),f.Nb(16,"p",6),f.kc(17),f.Mb(),f.Mb(),f.Nb(18,"ion-icon",7),f.Vb("click",(function(){f.fc(n);var e=f.Xb();return e.dropdown=!e.dropdown})),f.Mb(),f.Mb(),f.Nb(19,"ion-card",8),f.ic(20,I,5,1,"ion-item",9),f.Nb(21,"ion-item",10),f.Nb(22,"ion-label",3),f.kc(23," Start Adresse: "),f.Mb(),f.Nb(24,"ion-label"),f.kc(25),f.Jb(26,"br"),f.kc(27),f.Mb(),f.Mb(),f.Nb(28,"ion-item",10),f.Nb(29,"ion-label",3),f.kc(30," Ziel Adresse: "),f.Mb(),f.Nb(31,"ion-label"),f.kc(32),f.Jb(33,"br"),f.kc(34),f.Mb(),f.Mb(),f.ic(35,y,13,4,"ng-container",0),f.ic(36,w,6,0,"ion-item",9),f.Nb(37,"ion-item",10),f.Nb(38,"ion-label",3),f.kc(39," Bezahlung: "),f.Mb(),f.Nb(40,"ion-label"),f.kc(41),f.Mb(),f.Mb(),f.ic(42,x,11,4,"ng-container",0),f.ic(43,A,6,4,"div",11),f.ic(44,R,6,5,"div",11),f.Mb(),f.Mb()}if(2&e){var r=f.Xb();f.yb(4),f.lc(r.lieferobjekt.name||"Lieferobjekt nicht hinterlegt"),f.yb(2),f.lc(r.interessentenText),f.yb(3),f.lc(r.gesuch.abfahrtOrt),f.yb(3),f.lc(r.gesuch.ankunftOrt),f.yb(5),f.nc("",r.gesuch.ankunftDatum,", ",r.gesuch.ankunftZeit,""),f.yb(1),f.Ab("spin",r.dropdown),f.yb(1),f.Ab("card-dropdown-disabled",!r.dropdown),f.yb(1),f.ac("ngIf",r.gesuch),f.yb(5),f.mc(" ",r.gesuch.abfahrtStrasse,","),f.yb(2),f.nc(" ",r.gesuch.abfahrtPlz," ",r.gesuch.abfahrtOrt," "),f.yb(5),f.mc(" ",r.gesuch.ankunftStrasse,","),f.yb(2),f.nc(" ",r.gesuch.ankunftPlz," ",r.gesuch.ankunftOrt," "),f.yb(1),f.ac("ngIf",r.gesuch.erstellerId),f.yb(1),f.ac("ngIf",!r.gesuch.erstellerId),f.yb(5),f.mc(" ",r.gesuch.bezahlung," "),f.yb(1),f.ac("ngIf",r.user.id&&r.user.id===r.gesuch.erstellerId&&r.gesuch._ID),f.yb(1),f.ac("ngIf",r.user.id&&r.user.id===r.gesuch.erstellerId&&r.gesuch._ID),f.yb(1),f.ac("ngIf",r.user.id&&r.user.id!==r.gesuch.erstellerId&&r.gesuch._ID)}}function B(e,t){1&e&&(f.Nb(0,"div"),f.Nb(1,"ion-card",28),f.Nb(2,"ion-item",2),f.Jb(3,"ion-skeleton-text",29),f.Jb(4,"ion-skeleton-text",30),f.Mb(),f.Nb(5,"ion-item",2),f.Jb(6,"ion-skeleton-text",31),f.Jb(7,"ion-icon",5),f.Jb(8,"ion-skeleton-text",31),f.Mb(),f.Nb(9,"ion-item",10),f.Jb(10,"ion-skeleton-text",29),f.Jb(11,"ion-skeleton-text",30),f.Jb(12,"ion-skeleton-text",32),f.Mb(),f.Jb(13,"ion-icon",33),f.Mb(),f.Mb())}var U=function(){var e=function(){function e(t,n,r,i,h,f,l){c(this,e),this.authService=t,this.gesuchService=n,this.fahrtService=r,this.lieferobjektService=i,this.fahrzeugService=h,this.alertController=f,this.modalController=l,this.inputGesuch=new s.a,this.gesuch=new s.a,this.inputUser=new a.a("","","",""),this.user=new a.a("","","",""),this.lieferobjekt=new u.a,this.interessenten=[],this.fahrer=[],this.fahrt=new o.a,this.ersteller=new a.a("","","",""),this.dropdown=!1}return t(e,[{key:"ngOnInit",value:function(){var e=this;Object.assign(this.user,this.inputUser),Object.assign(this.gesuch,this.inputGesuch),console.log("Card:"+this.user.id),console.log("Card:"+this.gesuch._ID);var t=this.gesuch.getInteressenten();this.setInteressenten(t),this.setInteressentenText(t.length),this.setFahrer(this.gesuch.getFahrer()),this.gesuch.erstellerId&&this.authService.findUserById(this.gesuch.erstellerId).then((function(t){Object.assign(e.ersteller,t)})),this.gesuch.lieferobjektId&&this.lieferobjektService.findLieferobjektById(this.gesuch.lieferobjektId).subscribe((function(t){Object.assign(e.lieferobjekt,t)}))}},{key:"setInteressenten",value:function(e){var t=this;this.interessenten=[],e.forEach((function(e){t.authService.findUserById(e.userId).then((function(n){t.interessenten.push({user:n,interessent:e})}))}))}},{key:"setFahrer",value:function(e){var t=this;this.interessenten=[],e.forEach((function(e){t.authService.findUserById(e.userId).then((function(n){t.fahrer.push({user:n,fahrer:e})}))}))}},{key:"setInteressentenText",value:function(e){this.interessentenText=0===e?"Keine Interessenten":1===e?"1 Interessent":e+" Interessenten"}},{key:"interessentAnnehmen",value:function(e){var t=this;this.gesuch.isFahrer(e.userId)?alert("Der Interessent wurde schon angenommen."):(this.gesuch.addFahrer(e),this.gesuch.deleteInteressent(e),this.gesuchService.updateGesuch(this.gesuch).then((function(e){Object.assign(t.gesuch,e.gesuch)})).catch((function(e){return t.presentAlert("Fehler","Fehler beim Update des Gesuchs. Error: "+e,"Ok")})))}},{key:"interessentEntfernen",value:function(e){var t=this;this.authService.findUserById(e.userId).then((function(n){var r=n;r.id=e.userId;var i=r.interessierteGesuche.indexOf(t.gesuch._ID);r.interessierteGesuche.splice(i,1),t.authService.updateUser(r)})),this.gesuch.deleteInteressent(e),this.gesuchService.updateGesuch(this.gesuch).then((function(e){Object.assign(t.gesuch,e.gesuch)})).catch((function(e){return t.presentAlert("Fehler","Fehler beim Update des Gesuchs. Error: "+e,"Ok")}))}},{key:"infoPopoverInteressent",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.authService.findUserById(e.userId);case 2:return n=t.sent,t.next=5,this.fahrzeugService.findFahrzeugById(e.fahrzeugId).subscribe((function(e){return Object(i.a)(s,void 0,void 0,regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.unsubscribe(),t.next=3,this.modalController.create({component:h.a,cssClass:"my-custom-class",componentProps:{interessent:n,fahrzeug:e}});case 3:return i=t.sent,t.next=6,i.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))}));case 5:r=t.sent;case 6:case"end":return t.stop()}}),t,this)})))}},{key:"starteFahrt",value:function(){var e=this;this.authService.getUser()&&this.authService.getUser().id===this.gesuch.erstellerId?this.gesuch?this.gesuch.fahrtId?this.presentAlert("Fehler","Fahrt starten fehlgeschlagen. Die fahrt wurde bereits gestartet.","Ok"):this.fahrtService.startFahrt().then((function(t){e.fahrt=t.fahrt,e.gesuch.fahrtId=t.fahrt._ID,e.gesuchService.updateGesuch(e.gesuch).then((function(t){e.presentAlert("Fahrt gestartet","Die fahrt von "+t.gesuch.abfahrtOrt+" nach "+t.gesuch.ankunftOrt+" wurde gestartet.<br>Ihre angegebene Ankunftszeit ist: "+t.gesuch.ankunftZeit+".","Los gehts!")})).catch((function(t){e.presentAlert("Fehler","Fahrt starten fehlgeschlagen. Error: "+t,"Ok")}))})):this.presentAlert("Fehler","Fahrt starten fehlgeschlagen. Error: angebot: undefined","Ok"):this.presentAlert("Fehler","Fahrt starten fehlgeschlagen. Error: Nicht Authorisiert","Ok")}},{key:"fahrtBeenden",value:function(){var e=this;this.authService.getUser()&&this.authService.getUser().id===this.gesuch.erstellerId?this.gesuch?this.gesuch.fahrtId?this.fahrtService.endFahrt(this.gesuch.fahrtId).then((function(t){return Object(i.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.fahrt=t,this.fahrtBewerten(t._ID);case 1:case"end":return e.stop()}}),e,this)})))})):this.presentAlert("Fehler","Fahrt beenden fehlgeschlagen. Die fahrt wurde noch nicht gestartet.","Ok"):this.presentAlert("Fehler","Fahrt beenden fehlgeschlagen. Error: angebot: undefined","Ok"):this.presentAlert("Fehler","Fahrt beenden fehlgeschlagen. Error: Nicht Authorisiert","Ok")}},{key:"fahrtBewerten",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Fahrt bewerten!",subHeader:"Bewerte die Fahrt",message:'<ion-col>                <ion-icon name="star"></ion-icon>                <ion-icon name="star"></ion-icon>                <ion-icon name="star"></ion-icon>                <ion-icon name="star"></ion-icon>                <ion-icon name="star"></ion-icon>            </ion-col>',buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Okay",handler:function(){r.fahrtService.fahrtBewerten(e,5).then((function(e){r.fahrt=e})).catch((function(e){r.presentAlert("Bewertung fehlgeschlagen!","Beim speichern der Bewertung ist etwas schiefgelaufen. Error: <br>"+e,"Ok")}))}}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"getFahrzeuge",value:function(){var e=this;return new Promise((function(t,n){if(e.user.fahrzeuge&&0===e.user.fahrzeuge.length)n("Keine Fahrzeuge gespeichert");else{var r=[],i=!0;e.user.fahrzeuge.forEach((function(n){var s=e.fahrzeugService.findFahrzeugById(n).subscribe((function(c){s.unsubscribe(),r.push({name:n,type:"radio",label:c.marke+" "+c.modell,value:n,checked:i}),i=!1,r.length===e.user.fahrzeuge.length&&t(r)}))}))}}))}},{key:"gesuchAnfragen",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.gesuch,!e.t0){e.next=4;break}return e.next=4,this.getFahrzeuge().then((function(e){return Object(i.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,this.alertController.create({cssClass:"my-custom-class",header:"Fahrt anbieten",message:"W\xe4hle dein Fahrzeug mit dem du die Fahrt anbieten m\xf6chtest:",inputs:e,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Anfrage senden",handler:function(e){var t=new s.b,n=r.authService.getUser();n.interessierteGesuche.push(r.gesuch._ID),t.userId=n.id,t.fahrzeugId=e,r.gesuch.addInteressent(t),r.authService.updateUser(n).catch((function(e){r.presentAlert("Fehler!","Fehler beim update des Users der sich interessiert. Error: "+e,"Ok")})),r.gesuchService.updateGesuch(r.gesuch).catch((function(e){r.presentAlert("Fehler!","Fehler beim speichern des Angebots entstanden. Error: "+e,"Ok")}))}}]});case 3:return n=t.sent,t.next=6,n.present();case 6:case"end":return t.stop()}}),t,this)})))})).catch((function(e){t.presentAlert("Fehler!","Fehler laden der Fahrzeuge. Error: "+e,"Ok")}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"presentAlert",value:function(e,t,n){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({cssClass:"my-custom-class",header:e,message:t,buttons:[n]});case 2:return i=r.sent,r.next=5,i.present();case 5:case"end":return r.stop()}}),r,this)})))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f.Ib(l.a),f.Ib(b.a),f.Ib(d.a),f.Ib(g.a),f.Ib(p.a),f.Ib(v.a),f.Ib(v.M))},e.\u0275cmp=f.Cb({type:e,selectors:[["app-gesuch-card"]],inputs:{inputGesuch:"inputGesuch",inputUser:"inputUser"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"border-card-green"],["lines","none"],["slot","start"],["color","primary","slot","end"],["name","arrow-forward",1,"center"],["slot","end"],["size","large","name","chevron-down-outline",1,"center","transition","pointer",3,"click"],[1,"card-dropdown"],["lines","full",4,"ngIf"],["lines","full"],["class","ion-text-center ion-margin",4,"ngIf"],[1,"ion-margin"],[3,"src"],["lines","inset",4,"ngFor","ngForOf"],["lines","inset"],["slot","end","name","information-circle-outline",3,"click"],["slot","end","color","primary","name","checkmark-circle-outline",3,"click"],["slot","end","color","secondary","name","close-circle-outline",3,"click"],[1,"ion-text-center","ion-margin"],[3,"disabled","click",4,"ngIf"],[3,"click",4,"ngIf"],["disabled","true",4,"ngIf"],[3,"disabled","click"],[3,"click"],["disabled","true"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],[1,"ion-padding","custom-skeleton","border-card-green"],["slot","start","animated","",2,"width","30%"],["slot","end","animated","",2,"width","10%"],["slot","","animated","",2,"width","25%"],["slot","end","animated","",2,"width","20%"],["size","large","name","chevron-down-outline",1,"center"]],template:function(e,t){1&e&&(f.ic(0,G,45,23,"div",0),f.ic(1,B,14,0,"div",0)),2&e&&(f.ac("ngIf",t.user.id&&t.gesuch._ID),f.yb(1),f.ac("ngIf",!(t.user.id&&t.gesuch._ID)))},directives:[m.i,v.i,v.v,v.f,v.s,v.w,v.c,m.h,v.z,v.g,v.P,k.h,v.E],styles:[".border-card-green[_ngcontent-%COMP%]{border:2px solid green}.border-card-orange[_ngcontent-%COMP%]{border:2px solid orange}.border-card-green[_ngcontent-%COMP%], .border-card-orange[_ngcontent-%COMP%]{z-index:1}.center[_ngcontent-%COMP%]{width:100%;text-align:center}.card-dropdown[_ngcontent-%COMP%]{opacity:1;display:block;overflow:scroll;position:relative;top:0;max-height:500px}.card-dropdown[_ngcontent-%COMP%], .card-dropdown-disabled[_ngcontent-%COMP%]{transition:opacity 1s ease-out,max-height 1s,top 1s}.card-dropdown-disabled[_ngcontent-%COMP%]{top:-200px;opacity:0;max-height:0}.spin[_ngcontent-%COMP%]{transform:rotate(180deg)}.spin[_ngcontent-%COMP%], .transition[_ngcontent-%COMP%]{transition:1s}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),e}()},wHfo:function(e,n,r){"use strict";r.d(n,"a",(function(){return h}));var i=r("mrSG"),s=r("lJxs"),a=r("fXoL"),o=r("I/3d"),u=r("tyNb"),h=function(){var e=function(){function e(t,n){c(this,e),this.afs=t,this.router=n,this.startort="",this.zielort="",this.endDate="",this.gesuchCollection=t.collection("gesuche")}return t(e,[{key:"observableGesuch",value:function(){return this.gesuchCollection.snapshotChanges().pipe(Object(s.a)((function(e){return e.map((function(e){var t=e.payload.doc.data();return t._ID=e.payload.doc.id,t}))})))}},{key:"findGesuchById",value:function(e){var t=this;return new Promise((function(n,r){t.gesuchCollection.doc(e).get().toPromise().then((function(t){var r=t.data();r._ID=e,n(r)})).catch((function(e){return r(e)}))}))}},{key:"addGesuch",value:function(t){var n=this;return new Promise((function(r,i){n.gesuchCollection.add(e.copyAndPrepare(t)).then((function(e){var n=t;n._ID=e.id,r({gesuch:n,message:"Document written with ID: "+e.id})})).catch((function(e){i("Error adding document: "+e)}))}))}},{key:"deleteGesuch",value:function(e){var t=this;return new Promise((function(n,r){t.gesuchCollection.doc(e).delete().then((function(){return Object(i.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n("Successfully deleted Document with ID: "+e);case 1:case"end":return t.stop()}}),t)})))})).catch((function(e){r("Error deleting document: "+e)}))}))}},{key:"updateGesuch",value:function(t){var n=this;return new Promise((function(r,s){var c=t._ID;n.gesuchCollection.doc(t._ID).update(e.copyAndPrepare(t)).then((function(){return Object(i.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._ID=c,r({gesuch:t,message:"Successfully edited Document with ID: "+t._ID});case 1:case"end":return e.stop()}}),e)})))})).catch((function(e){s("Error editing document: "+e)}))}))}},{key:"startSearch",value:function(e,t,n){this.startort=e,this.zielort=t,this.endDate=n,this.router.navigate(["/gesuch"])}}],[{key:"copyAndPrepare",value:function(e){var t=Object.assign({},e);return delete t._ID,t.erstellerId=t.erstellerId||null,t.ankunftDatum=t.ankunftDatum||null,t.ankunftZeit=t.ankunftZeit||null,t.abfahrtStrasse=t.abfahrtStrasse||null,t.abfahrtOrt=t.abfahrtOrt||null,t.abfahrtPlz=t.abfahrtPlz||null,t.ankunftStrasse=t.ankunftStrasse||null,t.ankunftOrt=t.ankunftOrt||null,t.ankunftPlz=t.ankunftPlz||null,t.bezahlung=t.bezahlung||null,t.fahrtId=t.fahrtId||null,t.fahrer=t.fahrer||[],t.interessenten=t.interessenten||[],t.lieferobjektId=t.lieferobjektId||null,t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Rb(o.a),a.Rb(u.g))},e.\u0275prov=a.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();