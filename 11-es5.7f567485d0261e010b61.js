!function(){function e(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{G9vc:function(t,r,s){"use strict";s.r(r),s.d(r,"AngebotPageModule",(function(){return ne}));var c,b=s("ofXK"),u=s("3Pt+"),l=s("TEn/"),f=s("tyNb"),h=s("mrSG"),d=s("Oj1a"),g=s("fXoL"),p=s("VOOW"),v=s("ZETX"),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,e);var t=a(r);function r(){var e;return n(this,r),(e=t.apply(this,arguments)).kunden=[],e.interessenten=[],e}return i(r,[{key:"getInteressenten",value:function(){var e=[];return this.interessenten.forEach((function(t){e.push(JSON.parse(t))})),e}},{key:"addInteressent",value:function(e){return this.interessenten.push(JSON.stringify(e)),this}},{key:"deleteInteressent",value:function(e){return this.interessenten=this.interessenten.filter((function(t){return JSON.parse(t).userId!==e.userId&&JSON.parse(t).objectId!==e.objectId})),this}},{key:"isInteressent",value:function(e){for(var t=!1,n=this.getInteressenten(),r=0;r<n.length;r++)if(t=n[r].userId===e,r+1===n.length)return t}},{key:"getKunden",value:function(){var e=[];return this.kunden.forEach((function(t){e.push(JSON.parse(t))})),e}},{key:"addKunde",value:function(e){return this.kunden.push(JSON.stringify(e)),this}},{key:"deleteKunde",value:function(e){return this.kunden=this.kunden.filter((function(t){return JSON.parse(t).userId!==e.userId&&JSON.parse(t).objectId!==e.objectId})),this}},{key:"isKunde",value:function(e){for(var t=!1,n=this.getKunden(),r=0;r<n.length;r++)if(t=n[r].userId===e,n[r].userId===e&&r+1===n.length)return t}}]),r}(s("QIET").a),y=function e(){n(this,e)},k=s("88mt"),I=s("lJxs"),M=s("I/3d"),w=((c=function(){function e(t){n(this,e),this.afs=t,this.objektCollection=this.afs.collection("lieferObjekt")}return i(e,[{key:"findLieferobjektById",value:function(e){return this.objektCollection.doc(e).snapshotChanges().pipe(Object(I.a)((function(t){var n=t.payload.data();return n&&(n._ID=e),Object.assign({},n)})))}},{key:"addLieferobjekt",value:function(t){var n=this;return new Promise((function(r,i){n.objektCollection.add(e.copyAndPrepare(t)).then((function(e){var n=t;n._ID=e.id,r({lieferobjekt:n,message:"Document written with ID: "+e.id})})).catch((function(e){i("Error adding document: "+e)}))}))}},{key:"deleteLieferobjekt",value:function(e){var t=this;return new Promise((function(n,r){t.objektCollection.doc(e).delete().then((function(){return Object(h.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n("Successfully deleted Document with ID: "+e);case 1:case"end":return t.stop()}}),t)})))})).catch((function(e){r("Error deleting document: "+e)}))}))}}],[{key:"copyAndPrepare",value:function(e){var t=Object.assign({},e);return delete t._ID,t}}]),e}()).\u0275fac=function(e){return new(e||c)(g.Rb(M.a))},c.\u0275prov=g.Eb({token:c,factory:c.\u0275fac,providedIn:"root"}),c);function O(e,t){1&e&&(g.Nb(0,"ion-item",7),g.Nb(1,"ion-label",3),g.ic(2," Fahrzeug: "),g.Mb(),g.Nb(3,"ion-label"),g.ic(4," Mercedes Vito "),g.Mb(),g.Mb())}function N(e,t){if(1&e&&(g.Lb(0),g.Nb(1,"ion-item",7),g.Nb(2,"ion-label",3),g.ic(3," Ersteller: "),g.Mb(),g.Nb(4,"ion-avatar",12),g.Jb(5,"img",13),g.Mb(),g.Nb(6,"ion-label"),g.ic(7),g.Mb(),g.Mb(),g.Nb(8,"ion-item",7),g.Nb(9,"ion-label",3),g.ic(10," Telefon: "),g.Mb(),g.Nb(11,"ion-label"),g.ic(12),g.Mb(),g.Mb(),g.Kb()),2&e){var n=g.Xb(2);g.yb(5),g.bc("src",n.ersteller.profileImage||"https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y",g.fc),g.yb(2),g.lc(" ",n.ersteller.vorname||"Ladefehler"," ",n.ersteller.nachname||"Ladefehler"," "),g.yb(5),g.kc(" ",n.ersteller.telefon||"Ladefehler"," ")}}function A(e,t){1&e&&(g.Nb(0,"ion-item",7),g.Nb(1,"ion-label",3),g.ic(2," Ersteller: "),g.Mb(),g.Nb(3,"ion-label"),g.Nb(4,"em"),g.ic(5,"Fehler bei dem Darstellen des Erstellers!"),g.Mb(),g.Mb(),g.Mb())}function j(e,t){1&e&&(g.Nb(0,"ion-label"),g.Nb(1,"em"),g.ic(2,"Es gibt noch keine Interessenten."),g.Mb(),g.Mb())}function S(e,t){if(1&e){var n=g.Ob();g.Nb(0,"ion-item",15),g.Nb(1,"ion-avatar",3),g.Jb(2,"img",13),g.Mb(),g.Nb(3,"ion-label"),g.ic(4),g.Mb(),g.Jb(5,"ion-icon",16),g.Nb(6,"ion-icon",17),g.Vb("click",(function(){g.ec(n);var e=t.$implicit;return g.Xb(3).interessentAnnehmen(e.interessent)})),g.Mb(),g.Nb(7,"ion-icon",18),g.Vb("click",(function(){g.ec(n);var e=t.$implicit;return g.Xb(3).interessentEntfernen(e.interessent)})),g.Mb(),g.Mb()}if(2&e){var r=t.$implicit;g.yb(2),g.bc("src",r.user.profileImage||"https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y",g.fc),g.yb(2),g.lc(" ",r.user.vorname," ",r.user.nachname," ")}}function x(e,t){1&e&&(g.Nb(0,"ion-label"),g.Nb(1,"em"),g.ic(2,"Es wurden noch keine Interessenten angenommen."),g.Mb(),g.Mb())}function F(e,t){if(1&e&&(g.Nb(0,"ion-item",15),g.Nb(1,"ion-avatar",3),g.Jb(2,"img",13),g.Mb(),g.Nb(3,"ion-label"),g.ic(4),g.Mb(),g.Jb(5,"ion-icon",16),g.Mb()),2&e){var n=t.$implicit;g.yb(2),g.bc("src",n.user.profileImage||"https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y",g.fc),g.yb(2),g.lc(" ",n.user.vorname," ",n.user.nachname," ")}}function C(e,t){if(1&e&&(g.Lb(0),g.Nb(1,"ion-item",2),g.Nb(2,"ion-label",3),g.ic(3,"Interessenten:"),g.Mb(),g.hc(4,j,3,0,"ion-label",0),g.Mb(),g.hc(5,S,8,3,"ion-item",14),g.Nb(6,"ion-item",2),g.Nb(7,"ion-label",3),g.ic(8,"Kunden:"),g.Mb(),g.hc(9,x,3,0,"ion-label",0),g.Mb(),g.hc(10,F,6,3,"ion-item",14),g.Kb()),2&e){var n=g.Xb(2);g.yb(4),g.ac("ngIf",0===n.interessenten.length),g.yb(1),g.ac("ngForOf",n.interessenten),g.yb(4),g.ac("ngIf",0===n.kunden.length),g.yb(1),g.ac("ngForOf",n.kunden)}}function J(e,t){if(1&e){var n=g.Ob();g.Nb(0,"ion-button",21),g.Vb("click",(function(){return g.ec(n),g.Xb(3).starteFahrt()})),g.ic(1,"Fahrt starten"),g.Mb()}}function _(e,t){if(1&e){var n=g.Ob();g.Nb(0,"ion-button",21),g.Vb("click",(function(){return g.ec(n),g.Xb(3).fahrtBeenden()})),g.ic(1,"Fahrt beenden"),g.Mb()}}function E(e,t){if(1&e&&(g.Nb(0,"div",19),g.hc(1,J,2,0,"ion-button",20),g.hc(2,_,2,0,"ion-button",20),g.Mb()),2&e){var n=g.Xb(2);g.yb(1),g.ac("ngIf",!n.angebot.fahrtId),g.yb(1),g.ac("ngIf",n.angebot.fahrtId)}}function P(e,t){1&e&&(g.Nb(0,"ion-button",23),g.Nb(1,"em"),g.ic(2,"Anfrage ausstehend"),g.Mb(),g.Mb())}function D(e,t){1&e&&(g.Nb(0,"ion-button",23),g.Nb(1,"em"),g.ic(2,"Anfrage abgelehnt"),g.Mb(),g.Mb())}function K(e,t){1&e&&(g.Lb(0),g.Nb(1,"em"),g.ic(2,"Sobald der Fahrer die Fahrt beginnt ist das Tracking m\xf6glich."),g.Mb(),g.Jb(3,"br"),g.Nb(4,"ion-button",24),g.Nb(5,"em"),g.ic(6,"Fahrt tracken"),g.Mb(),g.Mb(),g.Kb())}function R(e,t){1&e&&(g.Nb(0,"ion-button"),g.ic(1,"Fahrt tracken"),g.Mb())}function L(e,t){if(1&e){var n=g.Ob();g.Nb(0,"ion-button",21),g.Vb("click",(function(){return g.ec(n),g.Xb(3).angebotAnfragen()})),g.ic(1,"Anfragen"),g.Mb()}}function U(e,t){if(1&e&&(g.Nb(0,"div",19),g.hc(1,P,3,0,"ion-button",22),g.hc(2,D,3,0,"ion-button",22),g.hc(3,K,7,0,"ng-container",0),g.hc(4,R,2,0,"ion-button",0),g.hc(5,L,2,0,"ion-button",20),g.Mb()),2&e){var n=g.Xb(2);g.yb(1),g.ac("ngIf",!n.angebot.fahrtId&&n.angebot.isInteressent(n.user.id)&&!n.angebot.isKunde(n.user.id)),g.yb(1),g.ac("ngIf",n.angebot.fahrtId&&n.angebot.isInteressent(n.user.id)&&!n.angebot.isKunde(n.user.id)),g.yb(1),g.ac("ngIf",!n.angebot.fahrtId&&n.angebot.isKunde(n.user.id)),g.yb(1),g.ac("ngIf",n.angebot.fahrtId&&n.angebot.isKunde(n.user.id)),g.yb(1),g.ac("ngIf",!n.angebot.isInteressent(n.user.id)&&!n.angebot.isKunde(n.user.id))}}function X(e,t){if(1&e){var n=g.Ob();g.Nb(0,"div"),g.Nb(1,"ion-card",1),g.Nb(2,"ion-item",2),g.Nb(3,"h3",3),g.ic(4),g.Mb(),g.Nb(5,"ion-badge",4),g.ic(6),g.Mb(),g.Mb(),g.Nb(7,"ion-item",2),g.Nb(8,"h4",3),g.ic(9),g.Mb(),g.Jb(10,"ion-icon",5),g.Nb(11,"h4",6),g.ic(12),g.Mb(),g.Mb(),g.Nb(13,"ion-item",7),g.Nb(14,"p",3),g.ic(15,"Ankunft:"),g.Mb(),g.Nb(16,"p",6),g.ic(17),g.Mb(),g.Mb(),g.Nb(18,"ion-icon",8),g.Vb("click",(function(){g.ec(n);var e=g.Xb();return e.dropdown=!e.dropdown})),g.Mb(),g.Mb(),g.Nb(19,"ion-card",9),g.hc(20,O,5,0,"ion-item",10),g.Nb(21,"ion-item",7),g.Nb(22,"ion-label",3),g.ic(23," Start Adresse: "),g.Mb(),g.Nb(24,"ion-label"),g.ic(25),g.Jb(26,"br"),g.ic(27),g.Mb(),g.Mb(),g.Nb(28,"ion-item",7),g.Nb(29,"ion-label",3),g.ic(30," Ziel Adresse: "),g.Mb(),g.Nb(31,"ion-label"),g.ic(32),g.Jb(33,"br"),g.ic(34),g.Mb(),g.Mb(),g.hc(35,N,13,4,"ng-container",0),g.hc(36,A,6,0,"ion-item",10),g.Nb(37,"ion-item",7),g.Nb(38,"ion-label",3),g.ic(39," Bezahlung: "),g.Mb(),g.Nb(40,"ion-label"),g.ic(41),g.Mb(),g.Mb(),g.hc(42,C,11,4,"ng-container",0),g.hc(43,E,3,2,"div",11),g.hc(44,U,6,5,"div",11),g.Mb(),g.Mb()}if(2&e){var r=g.Xb();g.yb(4),g.jc(r.angebot.fahrzeugId),g.yb(2),g.jc(r.interessentenText),g.yb(3),g.jc(r.angebot.abfahrtOrt),g.yb(3),g.jc(r.angebot.ankunftOrt),g.yb(5),g.lc("",r.angebot.ankunftDatum,", ",r.angebot.ankunftZeit,""),g.yb(1),g.Ab("spin",r.dropdown),g.yb(1),g.Ab("card-dropdown-disabled",!r.dropdown),g.yb(1),g.ac("ngIf",r.angebot),g.yb(5),g.kc(" ",r.angebot.abfahrtStrasse,","),g.yb(2),g.lc(" ",r.angebot.abfahrtPlz," ",r.angebot.abfahrtOrt," "),g.yb(5),g.kc(" ",r.angebot.ankunftStrasse,","),g.yb(2),g.lc(" ",r.angebot.ankunftPlz," ",r.angebot.ankunftOrt," "),g.yb(1),g.ac("ngIf",r.angebot.erstellerId),g.yb(1),g.ac("ngIf",!r.angebot.erstellerId),g.yb(5),g.kc(" ",r.angebot.bezahlung," "),g.yb(1),g.ac("ngIf",r.user.id&&r.user.id===r.angebot.erstellerId&&r.angebot._ID),g.yb(1),g.ac("ngIf",r.user.id&&r.user.id===r.angebot.erstellerId&&r.angebot._ID),g.yb(1),g.ac("ngIf",r.user.id&&r.user.id!==r.angebot.erstellerId&&r.angebot._ID)}}function B(e,t){1&e&&(g.Nb(0,"div"),g.Nb(1,"ion-card",25),g.Nb(2,"ion-item",2),g.Jb(3,"ion-skeleton-text",26),g.Jb(4,"ion-skeleton-text",27),g.Mb(),g.Nb(5,"ion-item",2),g.Jb(6,"ion-skeleton-text",28),g.Jb(7,"ion-icon",5),g.Jb(8,"ion-skeleton-text",28),g.Mb(),g.Nb(9,"ion-item",7),g.Jb(10,"ion-skeleton-text",26),g.Jb(11,"ion-skeleton-text",27),g.Jb(12,"ion-skeleton-text",29),g.Mb(),g.Jb(13,"ion-icon",30),g.Mb(),g.Mb())}var T,z=((T=function(){function e(t,r,i,o,a){var s=this;n(this,e),this.authService=t,this.angebotService=r,this.fahrtService=i,this.lieferobjektService=o,this.alertController=a,this.inputAngebot=new m,this.angebot=new m,this.inputUser=new d.a("","","",""),this.user=new d.a("","","",""),this.interessenten=[],this.kunden=[],this.ersteller=new d.a("","","",""),this.dropdown=!1,this.authService.loadPageSubscription((function(e){Object.assign(s.user,e)}))}return i(e,[{key:"ngOnInit",value:function(){var e=this;Object.assign(this.user,this.inputUser),Object.assign(this.angebot,this.inputAngebot);var t=this.angebot.getInteressenten();this.setInteressenten(t),this.setInteressentenText(t.length),this.setKunden(this.angebot.getKunden()),this.angebot.erstellerId&&this.authService.findUserById(this.angebot.erstellerId).then((function(t){Object.assign(e.ersteller,t)}))}},{key:"setInteressenten",value:function(e){var t=this;this.interessenten=[],e.forEach((function(e){t.authService.findUserById(e.userId).then((function(n){t.interessenten.push({user:n,interessent:e})}))}))}},{key:"setKunden",value:function(e){var t=this;this.kunden=[],e.forEach((function(e){t.authService.findUserById(e.userId).then((function(n){t.kunden.push({user:n,kunde:e})}))}))}},{key:"setInteressentenText",value:function(e){this.interessentenText=0===e?"Keine Interessenten":1===e?"1 Interessent":e+" Interessenten"}},{key:"interessentAnnehmen",value:function(e){var t=this;this.angebot.addKunde(e),this.angebot.deleteInteressent(e),this.angebotService.updateAngebot(this.angebot).then((function(e){Object.assign(t.angebot,e.angebot)})).catch((function(e){return t.presentAlert("Fehler","Fehler beim Update des Angebots. Error: "+e,"Ok")}))}},{key:"interessentEntfernen",value:function(e){var t=this;this.angebot.deleteInteressent(e),this.angebotService.updateAngebot(this.angebot).then((function(e){Object.assign(t.angebot,e.angebot)})).catch((function(e){return t.presentAlert("Fehler","Fehler beim Update des Angebots. Error: "+e,"Ok")}))}},{key:"starteFahrt",value:function(){var e=this;this.authService.getUser()&&this.authService.getUser().id===this.angebot.erstellerId?this.angebot?this.angebot.fahrtId?this.presentAlert("Fehler","Fahrt starten fehlgeschlagen. Die fahrt wurde bereits gestartet.","Ok"):this.fahrtService.startFahrt().then((function(t){e.angebot.fahrtId=t.fahrt._ID,e.angebotService.updateAngebot(e.angebot).then((function(t){e.presentAlert("Fahrt gestartet","Die fahrt von "+t.angebot.abfahrtOrt+" nach "+t.angebot.ankunftOrt+" wurde gestartet.<br>Ihre angegebene Ankunftszeit ist: "+t.angebot.ankunftZeit+".","Los gehts!")})).catch((function(t){e.presentAlert("Fehler","Fahrt starten fehlgeschlagen. Error: "+t,"Ok")}))})):this.presentAlert("Fehler","Fahrt starten fehlgeschlagen. Error: angebot: undefined","Ok"):this.presentAlert("Fehler","Fahrt starten fehlgeschlagen. Error: Nicht Authorisiert","Ok")}},{key:"fahrtBeenden",value:function(){var e=this;this.authService.getUser()&&this.authService.getUser().id===this.angebot.erstellerId?this.angebot?this.angebot.fahrtId?this.fahrtService.endFahrt(this.angebot.fahrtId).then((function(t){return Object(h.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.fahrtBewerten(t._ID);case 1:case"end":return e.stop()}}),e,this)})))})):this.presentAlert("Fehler","Fahrt beenden fehlgeschlagen. Die fahrt wurde noch nicht gestartet.","Ok"):this.presentAlert("Fehler","Fahrt beenden fehlgeschlagen. Error: angebot: undefined","Ok"):this.presentAlert("Fehler","Fahrt beenden fehlgeschlagen. Error: Nicht Authorisiert","Ok")}},{key:"fahrtBewerten",value:function(e){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Fahrt bewerten!",subHeader:"Bewerte die Fahrt",message:'<ion-col>                <ion-icon name="star"></ion-icon>                <ion-icon name="star"></ion-icon>                <ion-icon name="star"></ion-icon>                <ion-icon name="star"></ion-icon>                <ion-icon name="star"></ion-icon>            </ion-col>',buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Okay",handler:function(){r.fahrtService.fahrtBewerten(e,5).catch((function(e){r.presentAlert("Bewertung fehlgeschlagen!","Beim speichern der Bewertung ist etwas schiefgelaufen. Error: <br>"+e,"Ok")}))}}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"angebotAnfragen",value:function(){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.angebot){e.next=6;break}return e.next=3,this.alertController.create({cssClass:"my-custom-class",header:"Angebot anfragen",subHeader:"Welches Objekt soll f\xfcr Sie transportiert werden? ",inputs:[{name:"name",type:"text",placeholder:"name des Lieferobjekts"},{name:"beschreibung",type:"text",placeholder:"beschreibung"},{name:"preis",type:"text",placeholder:"Preisvorschlag"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Anfrage senden",handler:function(e){return Object(h.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new y).userId=this.authService.getUser().id,t.next=4,this.lieferobjektService.addLieferobjekt(e);case 4:r=t.sent,n.objectId=r.lieferobjekt._ID,this.angebot.addInteressent(n),this.angebotService.updateAngebot(this.angebot).catch((function(e){i.presentAlert("Fehler!","Fehler beim speichern des Angebots entstanden. Error: "+e,"Ok")}));case 6:case"end":return t.stop()}}),t,this)})))}}]});case 3:return t=e.sent,e.next=6,t.present();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"presentAlert",value:function(e,t,n){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({cssClass:"my-custom-class",header:e,message:t,buttons:[n]});case 2:return i=r.sent,r.next=5,i.present();case 5:case"end":return r.stop()}}),r,this)})))}}]),e}()).\u0275fac=function(e){return new(e||T)(g.Ib(v.a),g.Ib(p.a),g.Ib(k.a),g.Ib(w),g.Ib(l.a))},T.\u0275cmp=g.Cb({type:T,selectors:[["app-angebot-card"]],inputs:{inputAngebot:"inputAngebot",inputUser:"inputUser"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"border-card-orange"],["lines","none"],["slot","start"],["color","secondary","slot","end"],["name","arrow-forward",1,"center"],["slot","end"],["lines","full"],["size","large","name","chevron-down-outline",1,"center","transition","pointer",3,"click"],[1,"card-dropdown"],["lines","full",4,"ngIf"],["class","ion-text-center ion-margin",4,"ngIf"],[1,"ion-margin"],[3,"src"],["lines","inset",4,"ngFor","ngForOf"],["lines","inset"],["slot","end","name","information-circle-outline"],["slot","end","color","primary","name","checkmark-circle-outline",3,"click"],["slot","end","color","secondary","name","close-circle-outline",3,"click"],[1,"ion-text-center","ion-margin"],[3,"click",4,"ngIf"],[3,"click"],["disabled","true",4,"ngIf"],["disabled","true"],["disabled","true",1,"ion-margin-top"],[1,"ion-padding","custom-skeleton","border-card-orange"],["slot","start","animated","",2,"width","30%"],["slot","end","animated","",2,"width","10%"],["slot","","animated","",2,"width","25%"],["slot","end","animated","",2,"width","20%"],["size","large","name","chevron-down-outline",1,"center"]],template:function(e,t){1&e&&(g.hc(0,X,45,23,"div",0),g.hc(1,B,14,0,"div",0)),2&e&&(g.ac("ngIf",t.user.id&&t.angebot._ID),g.yb(1),g.ac("ngIf",!(t.user.id&&t.angebot._ID)))},directives:[b.i,l.i,l.v,l.f,l.s,l.w,l.c,b.h,l.g,l.D],styles:[".border-card-green[_ngcontent-%COMP%]{border:2px solid green}.border-card-orange[_ngcontent-%COMP%]{border:2px solid orange}.border-card-green[_ngcontent-%COMP%], .border-card-orange[_ngcontent-%COMP%]{z-index:1}.center[_ngcontent-%COMP%]{width:100%;text-align:center}.card-dropdown[_ngcontent-%COMP%]{opacity:1;display:block;overflow:scroll;position:relative;top:0;max-height:500px}.card-dropdown[_ngcontent-%COMP%], .card-dropdown-disabled[_ngcontent-%COMP%]{transition:opacity 1s ease-out,max-height 1s,top 1s}.card-dropdown-disabled[_ngcontent-%COMP%]{top:-200px;opacity:0;max-height:0}.spin[_ngcontent-%COMP%]{transform:rotate(180deg)}.spin[_ngcontent-%COMP%], .transition[_ngcontent-%COMP%]{transition:1s}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),T);function V(e,t){1&e&&g.Jb(0,"app-angebot-card",5)}var $=function(){return[0,1,2]};function G(e,t){1&e&&(g.Lb(0),g.hc(1,V,1,0,"app-angebot-card",4),g.Kb()),2&e&&(g.yb(1),g.ac("ngForOf",g.cc(1,$)))}function Z(e,t){if(1&e&&g.Jb(0,"app-angebot-card",7),2&e){var n=t.$implicit,r=g.Xb(2);g.ac("inputAngebot",n)("inputUser",r.user)}}function H(e,t){if(1&e&&(g.Lb(0),g.hc(1,Z,1,2,"app-angebot-card",6),g.Kb()),2&e){var n=g.Xb();g.yb(1),g.ac("ngForOf",n.filtertAngebote)}}var W,Q,q,Y=[{path:"",component:(W=function(){function t(e,r){n(this,t),this.angebotService=e,this.authService=r,this.user=new d.a("","","",""),this.angebote=[],this.filtertAngebote=[]}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.authService.loadPageSubscription((function(t){return e.user=t})),this.angebotService.observableAngebote().subscribe((function(t){return Object(h.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.angebote=[],this.filtertAngebote=[],this.angebote=t,this.filterAngebote();case 1:case"end":return e.stop()}}),e,this)})))}))}},{key:"ngOnDestroy",value:function(){this.subAngebot.unsubscribe()}},{key:"filterAngebote",value:function(){this.filtertAngebote=[];var t=this.angebotService.startort.toLowerCase(),n=this.angebotService.zielort.toLowerCase(),r=this.angebotService.endDate;if(t&&n&&r){var i,o=e(this.angebote);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.abfahrtOrt.toLowerCase().includes(t),c=a.ankunftOrt.toLowerCase().includes(n),b=a.ankunftDatum===r;s&&b&&c&&this.filtertAngebote.push(a)}}catch(u){o.e(u)}finally{o.f()}}else this.filtertAngebote=this.angebote}}]),t}(),W.\u0275fac=function(e){return new(e||W)(g.Ib(p.a),g.Ib(v.a))},W.\u0275cmp=g.Cb({type:W,selectors:[["app-angebot"]],decls:10,vars:2,consts:[["mode","ios"],["slot","start"],[1,"cargo-content"],[4,"ngIf"],[3,"inputAngebot",4,"ngFor","ngForOf"],[3,"inputAngebot"],[3,"inputAngebot","inputUser",4,"ngFor","ngForOf"],[3,"inputAngebot","inputUser"]],template:function(e,t){1&e&&(g.Nb(0,"ion-header",0),g.Nb(1,"ion-toolbar"),g.Nb(2,"ion-buttons",1),g.Jb(3,"ion-back-button"),g.Mb(),g.Nb(4,"ion-title"),g.ic(5,"Angebote"),g.Mb(),g.Mb(),g.Mb(),g.Nb(6,"ion-content"),g.Nb(7,"div",2),g.hc(8,G,2,2,"ng-container",3),g.hc(9,H,2,1,"ng-container",3),g.Mb(),g.Mb()),2&e&&(g.yb(8),g.ac("ngIf",t.filtertAngebote.length<1),g.yb(1),g.ac("ngIf",t.filtertAngebote.length>0))},directives:[l.r,l.G,l.h,l.d,l.e,l.F,l.n,b.i,b.h,z],styles:[""]}),W)}],ee=((Q=function e(){n(this,e)}).\u0275mod=g.Gb({type:Q}),Q.\u0275inj=g.Fb({factory:function(e){return new(e||Q)},imports:[[f.j.forChild(Y)],f.j]}),Q),te=s("iWjc"),ne=((q=function e(){n(this,e)}).\u0275mod=g.Gb({type:q}),q.\u0275inj=g.Fb({factory:function(e){return new(e||q)},imports:[[b.b,u.a,l.H,ee,te.a]]}),q)}}])}();